<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>图片的base64编码</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
</head>

<body>
    <script type="text/javascript" src="../jquery-3.2.1.min.js"></script>
    <script type="text/javascript">
    function getBase64Image(imgimgUrl) {
        var canvas = document.createElement("canvas");
        canvas.width = imgimgUrl.width / 5;
        canvas.height = imgimgUrl.height / 5;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(imgimgUrl, 0, 0, imgimgUrl.width / 5, imgimgUrl.height / 5);
        var ext = imgimgUrl.src.substring(imgimgUrl.src.lastIndexOf(".") + 1).toLowerCase();
        var dataURL = canvas.toDataURL("image/" + ext, 0.1);
        return dataURL;
    }
    var ima = new Image();
    ima.src = '../blackhole.png';
    // ima.onload = function() {
        var photo2 = getBase64Image(ima);
        console.log(photo2);
    // }
    </script>
</body>

</html>