<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>富文本编辑器</title>
    <link rel="stylesheet" href="http://cdn.gbtags.com/twitter-bootstrap/3.2.0/css/bootstrap.css" />
    <link rel="stylesheet" href="http://cdn.gbtags.com/font-awesome/4.1.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="http://cdn.gbtags.com/summernote/0.5.2/summernote.css" />
</head>

<body>
    <div id="summernote">
    </div>
    <script src="http://cdn.gbtags.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://cdn.gbtags.com/twitter-bootstrap/3.2.0/js/bootstrap.js"></script>
    <script src="http://cdn.gbtags.com/summernote/0.5.2/summernote.min.js"></script>
    <!-- 注意， 只需要引用 JS，无需引用任何 CSS ！！！-->
    <script type="text/javascript">
    $('#summernote').summernote({
        // 自定义工具栏
        // toolbar: [
        //     // [groupName, [list of button]]
        //     ['style', ['bold', 'italic', 'underline', 'clear']],
        //     ['font', ['strikethrough', 'superscript', 'subscript']],
        //     ['fontsize', ['fontsize']],
        //     ['color', ['color']],
        //     ['para', ['ul', 'ol', 'paragraph']],
        //     ['height', ['height']]
        // ],
        // 自定义极简模式的弹出框
        popover: {
            air: [
                ['color', ['color']],
                ['font', ['bold', 'underline', 'clear']]
            ]
        },
        placeholder: 'write here...',
        fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New'],
        dialogsInBody: true,
        dialogsFade: true,
        disableDragAndDrop: true,
        height: 250,
        minHeight: 250,
        maxHeight: 250,
        focus: true,
        callbacks: {
            // onImageUpload的参数为files，summernote支持选择多张图片
            onImageUpload: function(files) {
                var $files = $(files);
                // 通过each方法遍历每一个file
                $files.each(function() {
                    var file = this;
                    // FormData，新的form表单封装，具体可百度，但其实用法很简单，如下
                    var data = new FormData();
                    // 将文件加入到file中，后端可获得到参数名为“file”
                    data.append("file", file);
                    // ajax上传
                    // $.ajax({
                    //     data: data,
                    //     type: "POST",
                    //     url: url, // div上的action
                    //     cache: false,
                    //     contentType: false,
                    //     processData: false,
                    //     // 成功时调用方法，后端返回json数据
                    //     success: function(data) {
                    //         // 获取后台数据保存的图片完整路径
                    //         // 插入到summernote
                    //         $('#summernote').summernote('insertImage', data.imageUrl, function($image) {
                    //             // todo，后续可以对image对象增加新的css式样等等，这里默认
                    //         });
                    //     },
                    //     // ajax请求失败时处理
                    //     error: function() {
                    //         alert("上传失败");
                    //     }
                    // });
                });
            }
        }
    });

    // function sendFile(files, editor, $editable) {
    //     var formdata = new FormData();
    //     formdata.append("file", $('.note-image-input')[0].files[0]);
    //     $.ajax({
    //         data: formdata,
    //         type: "POST",
    //         url: "/umlProject/php/receiveFile.php", //图片上传出来的url，返回的是图片上传后的路径，http格式  
    //         cache: false,
    //         contentType: false,
    //         processData: false,
    //         dataType: "json",
    //         success: function(data) {
    //             //data是返回的hash,key之类的值，key是定义的文件名  
    //             $('#editor').summernote('insertImage', data.message);
    //         },
    //         error: function() {
    //             alert("上传失败");
    //         }
    //     });
    // }
    </script>
</body>

</html>