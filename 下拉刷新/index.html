<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>下拉刷新||上滑加载更多</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" href="pullToRefresh.css" />
    <style>
        body{
            padding-top: 20px;
        }
    </style>
</head>

<body>
    <div id="wrapper">
        <div class="refreshContainer">
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            <p>11111</p>
            
            <!-- <div class="content-item">
                    <p>提现金额</p>
                    <p>提现时间</p>
                    <p>到账时间</p>
                    <p>到账情况</p>
                </div> -->
        </div>
    </div>
    <script type="text/javascript" src="../jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="iscroll.js"></script>
    <script type="text/javascript" src="pullToRefresh.js"></script>
    <script type="text/javascript">
    refresher.init({
        id: "wrapper",
        pullDownAction: Refresh, //下滑刷新
        pullUpAction: Load //上滑加载
    });


    var id = localStorage.userId;

    function getInfo(pageNum) {
        // console.log(pageNum);
        // var data = {
        //     pageSize: 10,
        //     pageNum: pageNum,
        //     userId: id
        // }
        // $.ajax({
        //         url: aurl + '/appUser/selecWithrowByUserId',
        //         type: 'POST',
        //         dataType: 'json',
        //         contentType: 'application/json',
        //         data: JSON.stringify(data),
        //     })
        //     .done(function(res) {
        //         console.log(res);
        //         var str = '';
        //         $.each(res.data.list, function(i, v) {
        //             str += ' <div class="content-item">';
        //             str += ' <p>' + (v.applyMoney == null ? 0 : v.applyMoney) + ' 元</p>';
        //             str += ' <p>' + (v.applyDate == null ? "" : v.applyDate) + '</p>';
        //             str += ' <p>' + (v.remitSuccessDate == null ? "" : v.remitSuccessDate) + '</p>';
        //             str += ' <p style="color:' + (v.remitStatus == 0 ? "#F5C194" : "#0BB909") + '">' + (v.remitStatus == 0 ? "提现中" : "已到账") + '</p>';
        //             str += ' </div>';
        //         })
        //         $('.refreshContainer').append(str);
        //         if (res.data.total == 0) {
        //             $('.pullUpLabel').html('暂无记录');
        //         } else if (res.data.list.length < 10) {
        //             $('.pullUpLabel').html('没有更多了');
        //         } else {
        //             $('.pullUpLabel').html('加载更多...');
        //         }
        //     })
        //     .fail(function(err) {
        //         console.log(err);
        //     })
    }
    getInfo(0);
    //下拉刷新
    function Refresh() {
        setTimeout(function() {
            // $('.refreshContainer').html('');
            getInfo(0);
            myScroll.refresh();
        }, 1000);
    }
    //上滑加载更多
    var pageNum = 0;

    function Load() {
        pageNum++;
        // setTimeout(function() {
            getInfo(pageNum);
            myScroll.refresh();
        // }, 1000);
    }
    </script>
</body>

</html>